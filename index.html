<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Repository File Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root {
      --bg: #050816;
      --bg-card: #0f172a;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.12);
      --text: #e5e7eb;
      --muted: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.7);
      --shadow-soft-hover: 0 20px 50px rgba(15, 23, 42, 0.9);
      --transition-fast: 0.18s ease-out;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%);
      color: var(--text);
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 24px;
    }

    .app-shell {
      width: 100%;
      max-width: 1100px;
      background: linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.3);
      padding: 22px 20px 18px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
      overflow: hidden;
    }

    .app-shell::before {
      content: "";
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.10), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
      z-index: -1;
    }

    header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .title-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    h1 {
      font-size: 1.4rem;
      letter-spacing: 0.04em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .logo-pill {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #f97316, #22c55e, #06b6d4, #6366f1);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9), 0 0 18px rgba(56, 189, 248, 0.6);
    }

    .subtitle {
      font-size: 0.86rem;
      color: var(--muted);
    }

    .repo-pill {
      padding: 6px 11px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--muted);
      white-space: nowrap;
    }

    .repo-pill span.repo-name {
      color: var(--text);
      font-weight: 500;
    }

    .search-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-top: 4px;
    }

    .search-wrapper {
      flex: 1 1 220px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 9px 36px 9px 30px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.95));
      color: var(--text);
      font-size: 0.88rem;
      outline: none;
      backdrop-filter: blur(12px);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 1);
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), transform var(--transition-fast);
    }

    .search-input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .search-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7), 0 10px 30px rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 1), rgba(15, 23, 42, 0.96));
      transform: translateY(-1px);
    }

    .search-icon {
      position: absolute;
      top: 50%;
      left: 10px;
      transform: translateY(-50%);
      font-size: 0.85rem;
      color: rgba(148, 163, 184, 0.9);
    }

    .kbd-hint {
      position: absolute;
      top: 50%;
      right: 10px;
      transform: translateY(-50%);
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: rgba(148, 163, 184, 0.95);
      background: rgba(15, 23, 42, 0.95);
    }

    .meta-bar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.78rem;
      color: var(--muted);
      margin-top: -2px;
    }

    .meta-left {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .badge {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 0.75rem;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(56, 189, 248, 0.18);
    }

    .badge-pill {
      background: var(--accent-soft);
      border-color: rgba(56, 189, 248, 0.8);
      color: #e0f2fe;
    }

    main {
      margin-top: 4px;
      padding: 10px 2px 4px;
      background: radial-gradient(circle at top right, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 1));
      border-radius: 18px;
      border: 1px solid rgba(51, 65, 85, 0.8);
      max-height: 70vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .list-scroll {
      overflow-y: auto;
      padding: 6px 6px 10px;
      scrollbar-width: thin;
      scrollbar-color: rgba(100, 116, 139, 0.9) rgba(15, 23, 42, 1);
    }

    .list-scroll::-webkit-scrollbar {
      width: 7px;
    }
    .list-scroll::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 1);
      border-radius: 999px;
    }
    .list-scroll::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #64748b, #38bdf8);
      border-radius: 999px;
    }

    .file-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .file-card {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 9px 11px;
      border-radius: 14px;
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.92));
      border: 1px solid rgba(51, 65, 85, 0.95);
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.7);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
    }

    .file-card:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-soft-hover);
      border-color: rgba(56, 189, 248, 0.7);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 1), rgba(15, 23, 42, 0.98));
    }

    .file-main {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
      flex: 1;
    }

    .file-icon {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.28), rgba(15, 23, 42, 1));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
      box-shadow: 0 0 0 1px rgba(30, 64, 175, 0.8);
    }

    .file-text {
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .file-name {
      font-size: 0.88rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-path {
      font-size: 0.76rem;
      color: var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-meta {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
      font-size: 0.75rem;
    }

    .ext-pill {
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.65);
      color: #e5e7eb;
      text-transform: uppercase;
    }

    .btn-group {
      display: flex;
      gap: 6px;
      flex-shrink: 0;
    }

    .btn {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.85);
      background: rgba(15, 23, 42, 0.98);
      color: var(--text);
      font-size: 0.74rem;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      transition: background var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
    }

    .btn:hover {
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.2), rgba(15, 23, 42, 1));
      border-color: rgba(56, 189, 248, 0.9);
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.8);
    }

    .btn-ghost {
      border-style: dashed;
      opacity: 0.9;
    }

    .status-line {
      font-size: 0.8rem;
      color: var(--muted);
      padding: 3px 2px 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .status-left {
      display: flex;
      align-items: center;
      gap: 7px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.32);
    }

    .status-error {
      color: var(--danger);
    }

    .status-error .status-dot {
      background: var(--danger);
      box-shadow: 0 0 0 4px rgba(248, 113, 113, 0.35);
    }

    .status-right {
      font-size: 0.76rem;
    }

    .pill-count {
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.96);
    }

    .empty-state {
      padding: 20px 10px 30px;
      text-align: center;
      color: var(--muted);
      font-size: 0.86rem;
    }

    .empty-state strong {
      color: var(--text);
    }

    .spinner {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 2px solid rgba(148, 163, 184, 0.25);
      border-top-color: var(--accent);
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @media (max-width: 640px) {
      body {
        padding: 12px;
      }
      .app-shell {
        border-radius: 18px;
        padding: 16px 12px 14px;
      }
      main {
        max-height: 68vh;
      }
      .file-card {
        flex-direction: column;
        align-items: flex-start;
      }
      .file-meta {
        width: 100%;
        justify-content: space-between;
      }
      .btn-group {
        margin-left: auto;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <div class="title-group">
        <h1>
          <span class="logo-pill">‚àû</span>
          Repo Explorer
        </h1>
        <p class="subtitle">Browse and search every file in this GitHub repository.</p>
      </div>
      <div class="repo-pill">
        <span>Ó™Ñ</span>
        <span class="repo-name" id="repoLabel">loading‚Ä¶</span>
      </div>
    </header>

    <div class="search-row">
      <div class="search-wrapper">
        <span class="search-icon">üîç</span>
        <input
          id="searchInput"
          class="search-input"
          type="search"
          placeholder="Search files by name or path‚Ä¶"
          autocomplete="off"
        />
        <span class="kbd-hint">/</span>
      </div>

      <div class="badge badge-pill">
        <span class="badge-dot"></span>
        <span id="branchLabel">branch: ‚Äî</span>
      </div>
    </div>

    <div class="meta-bar">
      <div class="meta-left">
        <span>Tip: type to filter, press <strong>/</strong> to jump to search.</span>
      </div>
      <div>
        <span id="fileCountSummary">Loading files‚Ä¶</span>
      </div>
    </div>

    <main>
      <div class="list-scroll">
        <div id="fileList" class="file-list"></div>
      </div>

      <div id="statusBar" class="status-line">
        <div class="status-left">
          <span class="status-dot"></span>
          <span id="statusText">Fetching repository tree from GitHub‚Ä¶</span>
        </div>
        <div class="status-right">
          <span id="visibleCount" class="pill-count">0 visible</span>
        </div>
      </div>
    </main>
  </div>

  <script>
    // =========================
    // üîß CONFIG ‚Äì EDIT THESE
    // =========================
    const GITHUB_OWNER = "Videos2727"; // ‚Üê change
    const GITHUB_REPO  = "Kings-kingdom"; // ‚Üê change
    const GITHUB_BRANCH = "main";                // ‚Üê change, e.g. "master" or "gh-pages"

    // =========================
    // üöÄ APP LOGIC
    // =========================
    const apiUrl = `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/git/trees/${GITHUB_BRANCH}?recursive=1`;

    const state = {
      files: [],
      filteredFiles: [],
      loading: true,
      error: null
    };

    const els = {
      repoLabel: document.getElementById("repoLabel"),
      branchLabel: document.getElementById("branchLabel"),
      fileCountSummary: document.getElementById("fileCountSummary"),
      fileList: document.getElementById("fileList"),
      searchInput: document.getElementById("searchInput"),
      statusBar: document.getElementById("statusBar"),
      statusText: document.getElementById("statusText"),
      visibleCount: document.getElementById("visibleCount")
    };

    function getFileIcon(ext) {
      const lower = ext.toLowerCase();
      if (!lower) return "üìÑ";

      if (["md", "mdx"].includes(lower)) return "üìù";
      if (["js", "ts", "tsx", "jsx", "mjs", "cjs"].includes(lower)) return "üíª";
      if (["html", "htm"].includes(lower)) return "üåê";
      if (["css", "scss", "sass", "less"].includes(lower)) return "üé®";
      if (["json"].includes(lower)) return "üß©";
      if (["yml", "yaml"].includes(lower)) return "‚öôÔ∏è";
      if (["png", "jpg", "jpeg", "gif", "svg", "webp"].includes(lower)) return "üñºÔ∏è";
      if (["pdf"].includes(lower)) return "üìö";
      if (["zip", "rar", "7z"].includes(lower)) return "üóúÔ∏è";
      if (["csv", "xlsx", "xls"].includes(lower)) return "üìä";
      if (["py", "rb", "php", "java", "c", "cpp", "cs", "go", "rs"].includes(lower)) return "üß™";

      return "üìÑ";
    }

    function getExtension(path) {
      const parts = path.split("/");
      const fileName = parts[parts.length - 1];
      const idx = fileName.lastIndexOf(".");
      if (idx === -1) return "";
      return fileName.slice(idx + 1);
    }

    function buildGitHubUrl(path) {
      return `https://github.com/${GITHUB_OWNER}/${GITHUB_REPO}/blob/${GITHUB_BRANCH}/${encodeURIComponent(path).replace(/%2F/g, "/")}`;
    }

    function buildRawUrl(path) {
      return `https://raw.githubusercontent.com/${GITHUB_OWNER}/${GITHUB_REPO}/${GITHUB_BRANCH}/${encodeURIComponent(path).replace(/%2F/g, "/")}`;
    }

    function render() {
      const { loading, error, filteredFiles, files } = state;

      els.repoLabel.textContent = `${GITHUB_OWNER}/${GITHUB_REPO}`;
      els.branchLabel.textContent = `branch: ${GITHUB_BRANCH}`;

      if (loading) {
        els.fileCountSummary.textContent = "Loading files‚Ä¶";
        els.statusText.innerHTML = `
          <span style="display:inline-flex;align-items:center;gap:6px;">
            <span class="spinner"></span>
            <span>Fetching repository tree from GitHub‚Ä¶</span>
          </span>
        `;
        els.visibleCount.textContent = "0 visible";
      } else if (error) {
        els.fileCountSummary.textContent = "Could not load repository files.";
        els.statusBar.classList.add("status-error");
        els.statusText.textContent = error;
        els.visibleCount.textContent = "0 visible";
      } else {
        els.fileCountSummary.textContent = `Loaded ${files.length} files from repository.`;
        els.statusBar.classList.remove("status-error");

        const total = files.length;
        const visible = filteredFiles.length;
        els.visibleCount.textContent = `${visible} visible`;

        if (!visible) {
          els.fileList.innerHTML = `
            <div class="empty-state">
              <p><strong>No files match your search.</strong></p>
              <p>Try a different keyword or clear the search box.</p>
            </div>
          `;
          els.statusText.textContent = "No files match the current search.";
          return;
        } else {
          const searchTerm = els.searchInput.value.trim();
          els.statusText.textContent = searchTerm
            ? `Showing ${visible} of ${total} files for ‚Äú${searchTerm}‚Äù.`
            : `Showing all ${total} files.`;
        }
      }

      if (loading || error) {
        // Keep current list for error / loading
        return;
      }

      const fragment = document.createDocumentFragment();

      state.filteredFiles.forEach((file) => {
        const ext = getExtension(file.path);
        const icon = getFileIcon(ext);

        const card = document.createElement("div");
        card.className = "file-card";

        const main = document.createElement("div");
        main.className = "file-main";

        const iconEl = document.createElement("div");
        iconEl.className = "file-icon";
        iconEl.textContent = icon;

        const textWrap = document.createElement("div");
        textWrap.className = "file-text";

        const nameEl = document.createElement("div");
        nameEl.className = "file-name";
        nameEl.textContent = file.name;

        const pathEl = document.createElement("div");
        pathEl.className = "file-path";
        pathEl.textContent = file.path;

        textWrap.appendChild(nameEl);
        textWrap.appendChild(pathEl);

        main.appendChild(iconEl);
        main.appendChild(textWrap);

        const meta = document.createElement("div");
        meta.className = "file-meta";

        const extPill = document.createElement("span");
        extPill.className = "ext-pill";
        extPill.textContent = ext ? ext : "no ext";

        const btnGroup = document.createElement("div");
        btnGroup.className = "btn-group";

        const viewBtn = document.createElement("a");
        viewBtn.className = "btn";
        viewBtn.href = buildGitHubUrl(file.path);
        viewBtn.target = "_blank";
        viewBtn.rel = "noopener noreferrer";
        viewBtn.textContent = "View";

        const rawBtn = document.createElement("a");
        rawBtn.className = "btn btn-ghost";
        rawBtn.href = buildRawUrl(file.path);
        rawBtn.target = "_blank";
        rawBtn.rel = "noopener noreferrer";
        rawBtn.textContent = "Raw";

        btnGroup.appendChild(viewBtn);
        btnGroup.appendChild(rawBtn);

        meta.appendChild(extPill);
        meta.appendChild(btnGroup);

        card.appendChild(main);
        card.appendChild(meta);

        fragment.appendChild(card);
      });

      els.fileList.innerHTML = "";
      els.fileList.appendChild(fragment);
    }

    function applyFilter(query) {
      const q = query.trim().toLowerCase();

      if (!q) {
        state.filteredFiles = [...state.files];
      } else {
        state.filteredFiles = state.files.filter((file) => {
          const name = file.name.toLowerCase();
          const path = file.path.toLowerCase();
          return name.includes(q) || path.includes(q);
        });
      }

      render();
    }

    async function init() {
      try {
        render();

        const response = await fetch(apiUrl);
        if (!response.ok) {
          let message = `GitHub API error (${response.status})`;
          if (response.status === 404) {
            message = "Repository or branch not found. Check owner, repo, and branch names.";
          } else if (response.status === 403) {
            message = "Rate limit exceeded or access forbidden. Try again later, or ensure the repository is public.";
          }
          throw new Error(message);
        }

        const data = await response.json();
        if (!data.tree || !Array.isArray(data.tree)) {
          throw new Error("Unexpected response from GitHub API.");
        }

        const files = data.tree
          .filter((item) => item.type === "blob")
          .map((item) => {
            const parts = item.path.split("/");
            const name = parts[parts.length - 1];
            return { path: item.path, name };
          })
          .sort((a, b) => a.path.localeCompare(b.path));

        state.files = files;
        state.filteredFiles = [...files];
        state.loading = false;
        state.error = null;
        render();
      } catch (err) {
        console.error(err);
        state.loading = false;
        state.error = err.message || "Failed to load repository files.";
        render();
      }
    }

    // Search events
    els.searchInput.addEventListener("input", (e) => {
      applyFilter(e.target.value);
    });

    // Shortcut `/` to focus search
    window.addEventListener("keydown", (e) => {
      if (e.key === "/" && document.activeElement !== els.searchInput) {
        e.preventDefault();
        els.searchInput.focus();
        els.searchInput.select();
      }
    });

    init();
  </script>
</body>
</html>

